{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { map, withLatestFrom } from 'rxjs/operators';\nlet Exercise4Component = class Exercise4Component {\n  constructor(service) {\n    this.service = service;\n    this.countryControl = new FormControl('');\n    this.stateControl = new FormControl('');\n    this.countries$ = this.countryControl.valueChanges.pipe(withLatestFrom(this.service.getCountries()), map(([userInput, countries]) => countries.filter(c => c.description.toLowerCase().indexOf((userInput ?? \"\").toLowerCase()) !== -1)));\n  }\n  updateStates(country) {\n    this.countryControl.setValue(country.description);\n    this.states$ = this.stateControl.valueChanges.pipe(withLatestFrom(this.service.getStatesFor(country.id)), map(([userInput, states]) => {\n      return states.filter(state => state.description.toLowerCase().includes(userInput.toLowerCase()));\n    }));\n  }\n};\nExercise4Component = __decorate([Component({\n  selector: 'app-exercise4',\n  templateUrl: './exercise4.component.html',\n  styleUrls: ['./exercise4.component.css']\n})], Exercise4Component);\nexport { Exercise4Component };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAGjD,SAAQC,WAAW,QAAO,gBAAgB;AAE1C,SAAQC,GAAG,EAAEC,cAAc,QAAO,gBAAgB;AAO3C,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAQ7BC,YAAoBC,OAAuB;IAAvB,YAAO,GAAPA,OAAO;IAH3B,mBAAc,GAAG,IAAIL,WAAW,CAAS,EAAE,CAAC;IAC5C,iBAAY,GAAG,IAAIA,WAAW,CAAS,EAAE,CAAC;IAGxC,IAAI,CAACM,UAAU,GAAG,IAAI,CAACC,cAAc,CAACC,YAAY,CAACC,IAAI,CACrDP,cAAc,CAAC,IAAI,CAACG,OAAO,CAACK,YAAY,EAAE,CAAC,EAC3CT,GAAG,CAAC,CAAC,CAACU,SAAS,EAAEC,SAAS,CAAC,KACzBA,SAAS,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,OAAO,CAAC,CAACN,SAAS,IAAI,EAAE,EAAEK,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CACtG;EACH;EAEAE,YAAY,CAACC,OAAgB;IAC3B,IAAI,CAACZ,cAAc,CAACa,QAAQ,CAACD,OAAO,CAACJ,WAAW,CAAC;IACjD,IAAI,CAACM,OAAO,GAAG,IAAI,CAACC,YAAY,CAACd,YAAY,CAACC,IAAI,CAChDP,cAAc,CAAC,IAAI,CAACG,OAAO,CAACkB,YAAY,CAACJ,OAAO,CAACK,EAAE,CAAC,CAAC,EACrDvB,GAAG,CAAC,CAAC,CAACU,SAAS,EAAEc,MAAM,CAAC,KAAG;MACzB,OAAOA,MAAM,CAACZ,MAAM,CAACa,KAAK,IAAIA,KAAK,CAACX,WAAW,CAACC,WAAW,EAAE,CAACW,QAAQ,CAAChB,SAAS,CAACK,WAAW,EAAE,CAAC,CAAC;IAClG,CAAC,CAAC,CACH;EACH;CACD;AAzBYb,kBAAkB,eAL9BJ,SAAS,CAAC;EACT6B,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACW3B,kBAAkB,CAyB9B;SAzBYA,kBAAkB","names":["Component","FormControl","map","withLatestFrom","Exercise4Component","constructor","service","countries$","countryControl","valueChanges","pipe","getCountries","userInput","countries","filter","c","description","toLowerCase","indexOf","updateStates","country","setValue","states$","stateControl","getStatesFor","id","states","state","includes","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/workspaces/ng-advanced-workshop/src/app/exercise4/exercise4.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {Country, State} from './types';\nimport {FormControl} from '@angular/forms';\nimport {CountryService} from './country.service';\nimport {map, withLatestFrom} from 'rxjs/operators';\n\n@Component({\n  selector: 'app-exercise4',\n  templateUrl: './exercise4.component.html',\n  styleUrls: ['./exercise4.component.css']\n})\nexport class Exercise4Component {\n\n  countries$: Observable<Country[]>;\n  states$!: Observable<State[]>;\n  state!: State;\n  countryControl = new FormControl<string>('');\n  stateControl = new FormControl<string>('');\n\n  constructor(private service: CountryService) {\n    this.countries$ = this.countryControl.valueChanges.pipe(\n      withLatestFrom(this.service.getCountries()),\n      map(([userInput, countries]) =>\n        countries.filter(c => c.description.toLowerCase().indexOf((userInput ?? \"\").toLowerCase()) !== -1))\n    );\n  }\n\n  updateStates(country: Country) {\n    this.countryControl.setValue(country.description);\n    this.states$ = this.stateControl.valueChanges.pipe(\n      withLatestFrom(this.service.getStatesFor(country.id)),\n      map(([userInput, states])=>{\n        return states.filter(state => state.description.toLowerCase().includes(userInput.toLowerCase()))\n      })\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}