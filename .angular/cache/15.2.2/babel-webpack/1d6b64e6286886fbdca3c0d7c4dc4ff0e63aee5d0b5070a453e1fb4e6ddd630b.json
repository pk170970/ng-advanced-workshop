{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { combineLatest, debounceTime, map, startWith } from 'rxjs';\nimport { FormControl } from '@angular/forms';\nlet Exercise3Component = class Exercise3Component {\n  constructor(service) {\n    // this.countries$ = this.countryInput.valueChanges.pipe(\n    //   withLatestFrom(this.service.getCountries()),\n    //   map(([searchInput, countries]) => {\n    //     const term = searchInput.toLowerCase();\n    //     if(!term) return countries;\n    //     return countries.filter(country => country.description.toLowerCase().includes(term))\n    //   })\n    // )\n    this.service = service;\n    this.countryInput = new FormControl('');\n    this.countries$ = combineLatest([this.service.getCountries(), this.countryInput.valueChanges.pipe(startWith(''), debounceTime(300))]).pipe(map(([countries, searchInput]) => {\n      const term = searchInput.toLowerCase();\n      if (!term) return countries;\n      return countries.filter(country => country.description.toLowerCase().includes(term));\n    }));\n  }\n  updateStates(country) {\n    // this.country = country;\n    this.countryInput.setValue(country.description);\n    this.states$ = this.service.getStatesFor(country.id);\n  }\n};\nExercise3Component = __decorate([Component({\n  selector: 'app-exercise3',\n  templateUrl: './exercise3.component.html',\n  styleUrls: ['./exercise3.component.css']\n})], Exercise3Component);\nexport { Exercise3Component };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAqBC,aAAa,EAAEC,YAAY,EAAEC,GAAG,EAAEC,SAAS,QAAwB,MAAM;AAG9F,SAASC,WAAW,QAAQ,gBAAgB;AAQrC,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAQ7BC,YAAoBC,OAAuB;IACzC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IARkB,YAAO,GAAPA,OAAO;IAF3B,iBAAY,GAAG,IAAIH,WAAW,CAAS,EAAE,CAAC;IAYxC,IAAI,CAACI,UAAU,GAAGR,aAAa,CAAC,CAC9B,IAAI,CAACO,OAAO,CAACE,YAAY,EAAE,EAC3B,IAAI,CAACC,YAAY,CAACC,YAAY,CAACC,IAAI,CACjCT,SAAS,CAAC,EAAE,CAAC,EACbF,YAAY,CAAC,GAAG,CAAC,CAClB,CACF,CAAC,CAACW,IAAI,CACLV,GAAG,CAAC,CAAC,CAACW,SAAS,EAAEC,WAAW,CAAC,KAAI;MAC/B,MAAMC,IAAI,GAAGD,WAAW,CAACE,WAAW,EAAE;MACtC,IAAI,CAACD,IAAI,EAAE,OAAOF,SAAS;MAC3B,OAAOA,SAAS,CAACI,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACC,WAAW,CAACH,WAAW,EAAE,CAACI,QAAQ,CAACL,IAAI,CAAC,CAAC;IACtF,CAAC,CAAC,CACH;EACH;EAEAM,YAAY,CAACH,OAAgB;IAC3B;IACA,IAAI,CAACR,YAAY,CAACY,QAAQ,CAACJ,OAAO,CAACC,WAAW,CAAC;IAC/C,IAAI,CAACI,OAAO,GAAG,IAAI,CAAChB,OAAO,CAACiB,YAAY,CAACN,OAAO,CAACO,EAAE,CAAC;EACtD;CACD;AAtCYpB,kBAAkB,eAL9BN,SAAS,CAAC;EACT2B,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACWvB,kBAAkB,CAsC9B;SAtCYA,kBAAkB","names":["Component","combineLatest","debounceTime","map","startWith","FormControl","Exercise3Component","constructor","service","countries$","getCountries","countryInput","valueChanges","pipe","countries","searchInput","term","toLowerCase","filter","country","description","includes","updateStates","setValue","states$","getStatesFor","id","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/workspaces/ng-advanced-workshop/src/app/exercise3/exercise3.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Observable, combineLatest, debounceTime, map, startWith, withLatestFrom } from 'rxjs';\nimport { Country, State } from './types';\nimport { CountryService } from './country.service';\nimport { FormControl } from '@angular/forms';\n\n\n@Component({\n  selector: 'app-exercise3',\n  templateUrl: './exercise3.component.html',\n  styleUrls: ['./exercise3.component.css']\n})\nexport class Exercise3Component {\n\n  countries$: Observable<Country[]>;\n  states$: Observable<State[]>;\n  country!: Country;\n  state!: State;\n  countryInput = new FormControl<string>('');\n\n  constructor(private service: CountryService) {\n    // this.countries$ = this.countryInput.valueChanges.pipe(\n    //   withLatestFrom(this.service.getCountries()),\n    //   map(([searchInput, countries]) => {\n    //     const term = searchInput.toLowerCase();\n    //     if(!term) return countries;\n    //     return countries.filter(country => country.description.toLowerCase().includes(term))\n    //   })\n    // )\n\n    this.countries$ = combineLatest([\n      this.service.getCountries(),\n      this.countryInput.valueChanges.pipe(\n        startWith(''),\n        debounceTime(300)\n      )\n    ]).pipe(\n      map(([countries, searchInput]) => {\n        const term = searchInput.toLowerCase();\n        if (!term) return countries;\n        return countries.filter(country => country.description.toLowerCase().includes(term))\n      })\n    )\n  }\n\n  updateStates(country: Country) {\n    // this.country = country;\n    this.countryInput.setValue(country.description);\n    this.states$ = this.service.getStatesFor(country.id);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}