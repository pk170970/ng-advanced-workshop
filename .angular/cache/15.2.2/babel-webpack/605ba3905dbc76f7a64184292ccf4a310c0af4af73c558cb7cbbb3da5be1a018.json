{"ast":null,"code":"import { combineLatest, of, Subject } from 'rxjs';\nimport { FormControl } from '@angular/forms';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./country.service\";\nimport * as i2 from \"./dropdown/dropdown.component\";\nexport class Exercise5Component {\n  constructor(service) {\n    this.service = service;\n    this.currentCountry$ = new Subject();\n    this.statesForCountry$ = of([]);\n    this.countryControl = new FormControl('');\n    this.stateControl = new FormControl('');\n    this.countries$ = combineLatest([this.countryControl.valueChanges, this.service.getCountries()]).pipe(map(([userInput, countries]) => countries.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1)));\n    this.statesForCountry$ = this.currentCountry$.asObservable().pipe(tap(console.log), switchMap(cntry => this.service.getStatesFor(cntry.id)));\n    this.states$ = combineLatest([this.stateControl.valueChanges, this.statesForCountry$]).pipe(map(([userInput, states]) => states.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1)));\n  }\n}\nExercise5Component.ɵfac = function Exercise5Component_Factory(t) {\n  return new (t || Exercise5Component)(i0.ɵɵdirectiveInject(i1.CountryService));\n};\nExercise5Component.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: Exercise5Component,\n  selectors: [[\"app-exercise5\"]],\n  decls: 5,\n  vars: 1,\n  consts: [[\"src\", \"assets/exercise5.gif\"], [3, \"placeholderText\"]],\n  template: function Exercise5Component_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"img\", 0);\n      i0.ɵɵelementStart(1, \"div\");\n      i0.ɵɵelement(2, \"app-dropdown\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\");\n      i0.ɵɵelement(4, \"app-dropdown\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"placeholderText\", \"Country Value\");\n    }\n  },\n  dependencies: [i2.DropdownComponent],\n  styles: [\".dropbtn[_ngcontent-%COMP%] {\\n  padding: 5px;\\n  font-size: 16px;\\n}\\n\\n.dropdown[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: inline-block;\\n}\\n\\n.dropdown-content[_ngcontent-%COMP%] {\\n  display: none;\\n  position: absolute;\\n  min-width: 160px;\\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\\n  z-index: 1;\\n}\\n\\n.dropdown-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  color: black;\\n  padding: 12px 16px;\\n  text-decoration: none;\\n  display: block;\\n  background-color: white;\\n}\\n\\n.dropdown-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover {background-color: #f1f1f1}\\n\\n.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%], .dropbtn[_ngcontent-%COMP%]:focus    + .dropdown-content[_ngcontent-%COMP%]{\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZXhlcmNpc2U1L2V4ZXJjaXNlNS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsNENBQTRDO0VBQzVDLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIscUJBQXFCO0VBQ3JCLGNBQWM7RUFDZCx1QkFBdUI7QUFDekI7O0FBRUEsOEJBQThCLHlCQUF5Qjs7QUFFdkQ7RUFDRSxjQUFjO0FBQ2hCIiwic291cmNlc0NvbnRlbnQiOlsiLmRyb3BidG4ge1xuICBwYWRkaW5nOiA1cHg7XG4gIGZvbnQtc2l6ZTogMTZweDtcbn1cblxuLmRyb3Bkb3duIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG59XG5cbi5kcm9wZG93bi1jb250ZW50IHtcbiAgZGlzcGxheTogbm9uZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBtaW4td2lkdGg6IDE2MHB4O1xuICBib3gtc2hhZG93OiAwcHggOHB4IDE2cHggMHB4IHJnYmEoMCwwLDAsMC4yKTtcbiAgei1pbmRleDogMTtcbn1cblxuLmRyb3Bkb3duLWNvbnRlbnQgc3BhbiB7XG4gIGNvbG9yOiBibGFjaztcbiAgcGFkZGluZzogMTJweCAxNnB4O1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn1cblxuLmRyb3Bkb3duLWNvbnRlbnQgc3Bhbjpob3ZlciB7YmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMX1cblxuLmRyb3Bkb3duOmhvdmVyIC5kcm9wZG93bi1jb250ZW50LCAuZHJvcGJ0bjpmb2N1cyArIC5kcm9wZG93bi1jb250ZW50e1xuICBkaXNwbGF5OiBibG9jaztcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AACA,SAAQA,aAAa,EAAcC,EAAE,EAAEC,OAAO,QAAO,MAAM;AAE3D,SAAQC,WAAW,QAAO,gBAAgB;AAE1C,SAAQC,GAAG,EAAEC,SAAS,EAAEC,GAAG,QAAO,gBAAgB;;;;AAOlD,OAAM,MAAOC,kBAAkB;EAU7BC,YAAoBC,OAAuB;IAAvB,YAAO,GAAPA,OAAO;IAP3B,oBAAe,GAAG,IAAIP,OAAO,EAAW;IAExC,sBAAiB,GAAyBD,EAAE,CAAC,EAAE,CAAC;IAEhD,mBAAc,GAAG,IAAIE,WAAW,CAAC,EAAE,CAAC;IACpC,iBAAY,GAAG,IAAIA,WAAW,CAAC,EAAE,CAAC;IAGhC,IAAI,CAACO,UAAU,GAAGV,aAAa,CAAC,CAAC,IAAI,CAACW,cAAc,CAACC,YAAY,EAAE,IAAI,CAACH,OAAO,CAACI,YAAY,EAAE,CAAC,CAAC,CAACC,IAAI,CACnGV,GAAG,CAAC,CAAC,CAACW,SAAS,EAAEC,SAAS,CAAC,KAAKA,SAAS,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,OAAO,CAACN,SAAS,CAACK,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC5H;IACD,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACC,eAAe,CAACC,YAAY,EAAE,CAACV,IAAI,CAC/DR,GAAG,CAACmB,OAAO,CAACC,GAAG,CAAC,EAChBrB,SAAS,CAACsB,KAAK,IAAI,IAAI,CAAClB,OAAO,CAACmB,YAAY,CAACD,KAAK,CAACE,EAAE,CAAC,CAAC,CACxD;IACD,IAAI,CAACC,OAAO,GAAG9B,aAAa,CAAC,CAAC,IAAI,CAAC+B,YAAY,CAACnB,YAAY,EAAE,IAAI,CAACU,iBAAiB,CAAC,CAAC,CAACR,IAAI,CACzFV,GAAG,CAAC,CAAC,CAACW,SAAS,EAAEiB,MAAM,CAAC,KAAKA,MAAM,CAACf,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,OAAO,CAACN,SAAS,CAACK,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CACtH;EACH;;AArBWb,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZ/BC,yBAAkC;MAElCA,2BAAK;MACHA,kCAAoD;MACtDA,iBAAM;MACNA,2BAAK;MACHA,+BAAgB;MAClBA,iBAAM;;;MAJUA,eAAmC;MAAnCA,iDAAmC","names":["combineLatest","of","Subject","FormControl","map","switchMap","tap","Exercise5Component","constructor","service","countries$","countryControl","valueChanges","getCountries","pipe","userInput","countries","filter","c","description","toLowerCase","indexOf","statesForCountry$","currentCountry$","asObservable","console","log","cntry","getStatesFor","id","states$","stateControl","states","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/workspaces/ng-advanced-workshop/src/app/exercise5/exercise5.component.ts","/workspaces/ng-advanced-workshop/src/app/exercise5/exercise5.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport {combineLatest, Observable, of, Subject} from 'rxjs';\nimport {Country, State} from './types';\nimport {FormControl} from '@angular/forms';\nimport {CountryService} from './country.service';\nimport {map, switchMap, tap} from 'rxjs/operators';\n\n@Component({\n  selector: 'app-exercise5',\n  templateUrl: './exercise5.component.html',\n  styleUrls: ['./exercise5.component.css']\n})\nexport class Exercise5Component {\n\n  countries$: Observable<Country[]>;\n  currentCountry$ = new Subject<Country>();\n  states$: Observable<State[]>;\n  statesForCountry$: Observable<State[]> =  of([]);\n  state: State;\n  countryControl = new FormControl('');\n  stateControl = new FormControl('');\n\n  constructor(private service: CountryService) {\n    this.countries$ = combineLatest([this.countryControl.valueChanges, this.service.getCountries()]).pipe(\n      map(([userInput, countries]) => countries.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1))\n    );\n    this.statesForCountry$ = this.currentCountry$.asObservable().pipe(\n      tap(console.log),\n      switchMap(cntry => this.service.getStatesFor(cntry.id))\n    );\n    this.states$ = combineLatest([this.stateControl.valueChanges, this.statesForCountry$]).pipe(\n      map(([userInput, states]) => states.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1))\n    );\n  }\n\n}\n","<img src=\"assets/exercise5.gif\" />\n\n<div>\n  <app-dropdown [placeholderText]=\"'Country Value'\" />\n</div>\n<div>\n  <app-dropdown />\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}