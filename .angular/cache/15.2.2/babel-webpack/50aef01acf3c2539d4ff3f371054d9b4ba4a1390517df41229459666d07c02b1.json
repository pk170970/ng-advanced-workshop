{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { map, withLatestFrom } from 'rxjs';\nimport { FormControl } from '@angular/forms';\nlet Exercise3Component = class Exercise3Component {\n  constructor(service) {\n    this.service = service;\n    this.countryInput = new FormControl('');\n    this.countries$ = this.countryInput.valueChanges.pipe(withLatestFrom(this.countries$), map(([searchInput, countries]) => {\n      const term = searchInput.lowerCase();\n      if (!term) return countries;\n      return countries.filter(country => country.description.toLowerCase().includes(term));\n    }));\n  }\n  updateStates(country) {\n    this.country = country;\n    this.states$ = this.service.getStatesFor(country.id);\n  }\n};\nExercise3Component = __decorate([Component({\n  selector: 'app-exercise3',\n  templateUrl: './exercise3.component.html',\n  styleUrls: ['./exercise3.component.css']\n})], Exercise3Component);\nexport { Exercise3Component };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAA2BC,GAAG,EAAEC,cAAc,QAAO,MAAM;AAG3D,SAASC,WAAW,QAAQ,gBAAgB;AAOrC,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAQ7BC,YAAoBC,OAAuB;IAAvB,YAAO,GAAPA,OAAO;IAF3B,iBAAY,GAAG,IAAIH,WAAW,CAAM,EAAE,CAAC;IAGrC,IAAI,CAACI,UAAU,GAAG,IAAI,CAACC,YAAY,CAACC,YAAY,CAACC,IAAI,CACnDR,cAAc,CAAC,IAAI,CAACK,UAAU,CAAC,EAC/BN,GAAG,CAAC,CAAC,CAACU,WAAW,EAAEC,SAAS,CAAC,KAAI;MAC/B,MAAMC,IAAI,GAAGF,WAAW,CAACG,SAAS,EAAE;MACpC,IAAG,CAACD,IAAI,EAAE,OAAOD,SAAS;MAC1B,OAAOA,SAAS,CAACG,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACN,IAAI,CAAC,CAAC;IACtF,CAAC,CAAC,CACH;EACF;EAEDO,YAAY,CAACJ,OAAgB;IAC3B,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACK,OAAO,GAAG,IAAI,CAACf,OAAO,CAACgB,YAAY,CAACN,OAAO,CAACO,EAAE,CAAC;EACtD;CACD;AAvBYnB,kBAAkB,eAL9BJ,SAAS,CAAC;EACTwB,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACWtB,kBAAkB,CAuB9B;SAvBYA,kBAAkB","names":["Component","map","withLatestFrom","FormControl","Exercise3Component","constructor","service","countries$","countryInput","valueChanges","pipe","searchInput","countries","term","lowerCase","filter","country","description","toLowerCase","includes","updateStates","states$","getStatesFor","id","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/workspaces/ng-advanced-workshop/src/app/exercise3/exercise3.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport {Observable, count, map, withLatestFrom} from 'rxjs';\nimport {Country, State} from './types';\nimport {CountryService} from './country.service';\nimport { FormControl } from '@angular/forms';\n\n@Component({\n  selector: 'app-exercise3',\n  templateUrl: './exercise3.component.html',\n  styleUrls: ['./exercise3.component.css']\n})\nexport class Exercise3Component {\n\n  countries$: Observable<Country[]>;\n  states$: Observable<State[]>;\n  country!: Country;\n  state!: State;\n  countryInput = new FormControl<any>('');\n\n  constructor(private service: CountryService) {\n    this.countries$ = this.countryInput.valueChanges.pipe(\n      withLatestFrom(this.countries$),\n      map(([searchInput, countries]) => {\n        const term = searchInput.lowerCase();\n        if(!term) return countries;\n        return countries.filter(country => country.description.toLowerCase().includes(term))\n      })\n    )\n   }\n\n  updateStates(country: Country) {\n    this.country = country;\n    this.states$ = this.service.getStatesFor(country.id);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}