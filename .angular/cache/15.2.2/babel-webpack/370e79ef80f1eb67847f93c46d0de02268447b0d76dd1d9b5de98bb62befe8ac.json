{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../solution3/highlight.pipe\";\nfunction AutofilterDropdownComponent_div_2_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 5);\n    i0.ɵɵlistener(\"click\", function AutofilterDropdownComponent_div_2_span_1_Template_span_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const entry_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.newSelection(entry_r3));\n    });\n    i0.ɵɵpipe(1, \"highlight\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const entry_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind2(1, 1, entry_r3.description, ctx_r2.entryControl.value), i0.ɵɵsanitizeHtml);\n  }\n}\nfunction AutofilterDropdownComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtemplate(1, AutofilterDropdownComponent_div_2_span_1_Template, 2, 4, \"span\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const entries_r1 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", entries_r1);\n  }\n}\nexport let AutofilterDropdownComponent = /*#__PURE__*/(() => {\n  class AutofilterDropdownComponent {\n    constructor() {\n      this.selectionChange = new EventEmitter();\n      this.entryControl = new FormControl('');\n    }\n    set selection(entry) {\n      if (entry) {\n        this.entryControl.setValue(entry.description);\n      } else {\n        this.entryControl.setValue('');\n      }\n    }\n    ngOnInit() {\n      this.filteredEntries$ = combineLatest([this.entryControl.valueChanges, this.entries$]).pipe(map(([userInput, entries]) => entries.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1)));\n    }\n    newSelection(entry) {\n      this.entryControl.setValue(entry.description);\n      this.selectionChange.emit(entry);\n    }\n  }\n  AutofilterDropdownComponent.ɵfac = function AutofilterDropdownComponent_Factory(t) {\n    return new (t || AutofilterDropdownComponent)();\n  };\n  AutofilterDropdownComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AutofilterDropdownComponent,\n    selectors: [[\"app-autofilter-dropdown\"]],\n    inputs: {\n      entries$: \"entries$\",\n      placeholder: \"placeholder\",\n      selection: \"selection\"\n    },\n    outputs: {\n      selectionChange: \"selectionChange\"\n    },\n    decls: 4,\n    vars: 5,\n    consts: [[1, \"dropdown\"], [\"type\", \"text\", 1, \"dropbtn\", 3, \"formControl\", \"placeholder\"], [\"class\", \"dropdown-content\", 4, \"ngIf\"], [1, \"dropdown-content\"], [3, \"innerHTML\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"innerHTML\", \"click\"]],\n    template: function AutofilterDropdownComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"input\", 1);\n        i0.ɵɵtemplate(2, AutofilterDropdownComponent_div_2_Template, 2, 1, \"div\", 2);\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.entryControl)(\"placeholder\", ctx.placeholder);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 3, ctx.filteredEntries$));\n      }\n    },\n    dependencies: [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlDirective, i1.AsyncPipe, i3.HighlightPipe],\n    styles: [\".dropbtn[_ngcontent-%COMP%]{padding:5px;font-size:16px}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block;background-color:#fff}.dropdown-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%], .dropbtn[_ngcontent-%COMP%]:focus + .dropdown-content[_ngcontent-%COMP%]{display:block}\"]\n  });\n  return AutofilterDropdownComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}