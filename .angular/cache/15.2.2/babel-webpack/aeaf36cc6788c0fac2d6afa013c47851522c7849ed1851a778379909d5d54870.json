{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { combineLatest, Subject } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nlet Exercise5Component = class Exercise5Component {\n  constructor(service) {\n    this.service = service;\n    this.currentCountry$ = new Subject();\n    this.countryControl = new Subject();\n    this.stateControl = new Subject();\n    this.countries$ = combineLatest([this.countryControl.pipe(startWith('')), this.service.getCountries()]).pipe(map(([userInput, countries]) => countries.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1)));\n    this.states$ = combineLatest([this.stateControl.pipe(startWith('')), this.service.getStatesFor(this.countryId)]).pipe(map(([userInput, states]) => states.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1)));\n  }\n  countryInputChange(inputValue) {\n    console.log('in parent for country', inputValue);\n    this.countryControl.next(inputValue);\n  }\n  stateInputChange(data) {\n    console.log('in parent for state', data);\n    if (data && data?.country) {\n      this.countryId = data.country.id;\n      this.stateControl.next(data?.stateInput);\n    }\n  }\n};\nExercise5Component = __decorate([Component({\n  selector: 'app-exercise5',\n  templateUrl: './exercise5.component.html',\n  styleUrls: ['./exercise5.component.css']\n})], Exercise5Component);\nexport { Exercise5Component };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAQC,aAAa,EAAkBC,OAAO,QAAO,MAAM;AAI3D,SAAQC,GAAG,EAAEC,SAAS,QAAuB,gBAAgB;AAOtD,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAU7BC,YAAoBC,OAAuB;IAAvB,YAAO,GAAPA,OAAO;IAP3B,oBAAe,GAAG,IAAIL,OAAO,EAAW;IAIxC,mBAAc,GAAG,IAAIA,OAAO,EAAU;IACtC,iBAAY,GAAG,IAAIA,OAAO,EAAU;IAGlC,IAAI,CAACM,UAAU,GAAGP,aAAa,CAAC,CAC9B,IAAI,CAACQ,cAAc,CAACC,IAAI,CAACN,SAAS,CAAC,EAAE,CAAC,CAAC,EACvC,IAAI,CAACG,OAAO,CAACI,YAAY,EAAE,CAC5B,CAAC,CACDD,IAAI,CACHP,GAAG,CAAC,CAAC,CAACS,SAAS,EAAEC,SAAS,CAAC,KAAKA,SAAS,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,OAAO,CAACN,SAAS,CAACK,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC5H;IAED,IAAI,CAACE,OAAO,GAAGlB,aAAa,CAAC,CAC3B,IAAI,CAACmB,YAAY,CAACV,IAAI,CAACN,SAAS,CAAC,EAAE,CAAC,CAAC,EACrC,IAAI,CAACG,OAAO,CAACc,YAAY,CAAC,IAAI,CAACC,SAAS,CAAC,CAC1C,CAAC,CACDZ,IAAI,CACHP,GAAG,CAAC,CAAC,CAACS,SAAS,EAAEW,MAAM,CAAC,KAAKA,MAAM,CAACT,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,OAAO,CAACN,SAAS,CAACK,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CACtH;EACH;EAEAO,kBAAkB,CAACC,UAAiB;IAClCC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEF,UAAU,CAAC;IAChD,IAAI,CAAChB,cAAc,CAACmB,IAAI,CAACH,UAAU,CAAC;EACtC;EAEAI,gBAAgB,CAACC,IAAyC;IACxDJ,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEG,IAAI,CAAC;IACxC,IAAGA,IAAI,IAAIA,IAAI,EAAEC,OAAO,EAAC;MACvB,IAAI,CAACT,SAAS,GAAGQ,IAAI,CAACC,OAAO,CAACC,EAAE;MAChC,IAAI,CAACZ,YAAY,CAACQ,IAAI,CAACE,IAAI,EAAEG,UAAU,CAAC;;EAE5C;CAED;AAzCY5B,kBAAkB,eAL9BL,SAAS,CAAC;EACTkC,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACW/B,kBAAkB,CAyC9B;SAzCYA,kBAAkB","names":["Component","combineLatest","Subject","map","startWith","Exercise5Component","constructor","service","countries$","countryControl","pipe","getCountries","userInput","countries","filter","c","description","toLowerCase","indexOf","states$","stateControl","getStatesFor","countryId","states","countryInputChange","inputValue","console","log","next","stateInputChange","data","country","id","stateInput","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/workspaces/ng-advanced-workshop/src/app/exercise5/exercise5.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport {combineLatest, Observable, of, Subject} from 'rxjs';\nimport {Country, State} from './types';\nimport {FormControl} from '@angular/forms';\nimport {CountryService} from './country.service';\nimport {map, startWith, switchMap, tap} from 'rxjs/operators';\n\n@Component({\n  selector: 'app-exercise5',\n  templateUrl: './exercise5.component.html',\n  styleUrls: ['./exercise5.component.css']\n})\nexport class Exercise5Component {\n\n  countries$: Observable<Country[]>;\n  currentCountry$ = new Subject<Country>();\n  states$: Observable<State[]>;\n  \n  countryId:string;\n  countryControl = new Subject<string>();\n  stateControl = new Subject<string>();\n\n  constructor(private service: CountryService) {\n    this.countries$ = combineLatest([\n      this.countryControl.pipe(startWith('')),\n      this.service.getCountries()\n    ])\n    .pipe(\n      map(([userInput, countries]) => countries.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1))\n    );\n\n    this.states$ = combineLatest([\n      this.stateControl.pipe(startWith('')),\n      this.service.getStatesFor(this.countryId)\n    ])\n    .pipe(\n      map(([userInput, states]) => states.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1))\n    );\n  }\n\n  countryInputChange(inputValue:string){\n    console.log('in parent for country', inputValue);\n    this.countryControl.next(inputValue);\n  }\n\n  stateInputChange(data:{stateInput:string, country:Country}){\n    console.log('in parent for state', data);\n    if(data && data?.country){\n      this.countryId = data.country.id;\n      this.stateControl.next(data?.stateInput);\n    }\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}