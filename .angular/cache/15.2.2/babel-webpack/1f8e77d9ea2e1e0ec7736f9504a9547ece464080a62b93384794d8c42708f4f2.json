{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { combineLatest, of, Subject } from 'rxjs';\nimport { FormControl } from '@angular/forms';\nimport { map, switchMap, tap } from 'rxjs/operators';\nlet Exercise5Component = class Exercise5Component {\n  constructor(service) {\n    this.service = service;\n    this.currentCountry$ = new Subject();\n    this.statesForCountry$ = of([]);\n    this.countryControl = new FormControl('');\n    this.stateControl = new FormControl('');\n    this.countries$ = combineLatest([this.countryControl.valueChanges, this.service.getCountries()]).pipe(map(([userInput, countries]) => countries.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1)));\n    this.statesForCountry$ = this.currentCountry$.asObservable().pipe(tap(console.log), switchMap(cntry => this.service.getStatesFor(cntry.id)));\n    this.states$ = combineLatest([this.stateControl.valueChanges, this.statesForCountry$]).pipe(map(([userInput, states]) => states.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1)));\n  }\n  updateStates(country) {\n    this.countryControl.setValue(country.description);\n    this.stateControl.setValue('');\n    this.currentCountry$.next(country);\n  }\n};\nExercise5Component = __decorate([Component({\n  selector: 'app-exercise5',\n  templateUrl: './exercise5.component.html',\n  styleUrls: ['./exercise5.component.css']\n})], Exercise5Component);\nexport { Exercise5Component };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAQC,aAAa,EAAcC,EAAE,EAAEC,OAAO,QAAO,MAAM;AAE3D,SAAQC,WAAW,QAAO,gBAAgB;AAE1C,SAAQC,GAAG,EAAEC,SAAS,EAAEC,GAAG,QAAO,gBAAgB;AAO3C,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAU7BC,YAAoBC,OAAuB;IAAvB,YAAO,GAAPA,OAAO;IAP3B,oBAAe,GAAG,IAAIP,OAAO,EAAW;IAExC,sBAAiB,GAAyBD,EAAE,CAAC,EAAE,CAAC;IAEhD,mBAAc,GAAG,IAAIE,WAAW,CAAC,EAAE,CAAC;IACpC,iBAAY,GAAG,IAAIA,WAAW,CAAC,EAAE,CAAC;IAGhC,IAAI,CAACO,UAAU,GAAGV,aAAa,CAAC,CAAC,IAAI,CAACW,cAAc,CAACC,YAAY,EAAE,IAAI,CAACH,OAAO,CAACI,YAAY,EAAE,CAAC,CAAC,CAACC,IAAI,CACnGV,GAAG,CAAC,CAAC,CAACW,SAAS,EAAEC,SAAS,CAAC,KAAKA,SAAS,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,OAAO,CAACN,SAAS,CAACK,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC5H;IACD,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACC,eAAe,CAACC,YAAY,EAAE,CAACV,IAAI,CAC/DR,GAAG,CAACmB,OAAO,CAACC,GAAG,CAAC,EAChBrB,SAAS,CAACsB,KAAK,IAAI,IAAI,CAAClB,OAAO,CAACmB,YAAY,CAACD,KAAK,CAACE,EAAE,CAAC,CAAC,CACxD;IACD,IAAI,CAACC,OAAO,GAAG9B,aAAa,CAAC,CAAC,IAAI,CAAC+B,YAAY,CAACnB,YAAY,EAAE,IAAI,CAACU,iBAAiB,CAAC,CAAC,CAACR,IAAI,CACzFV,GAAG,CAAC,CAAC,CAACW,SAAS,EAAEiB,MAAM,CAAC,KAAKA,MAAM,CAACf,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAACC,WAAW,EAAE,CAACC,OAAO,CAACN,SAAS,CAACK,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CACtH;EACH;EAEAa,YAAY,CAACC,OAAgB;IAC3B,IAAI,CAACvB,cAAc,CAACwB,QAAQ,CAACD,OAAO,CAACf,WAAW,CAAC;IACjD,IAAI,CAACY,YAAY,CAACI,QAAQ,CAAC,EAAE,CAAC;IAC9B,IAAI,CAACZ,eAAe,CAACa,IAAI,CAACF,OAAO,CAAC;EACpC;CAED;AA7BY3B,kBAAkB,eAL9BR,SAAS,CAAC;EACTsC,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACWhC,kBAAkB,CA6B9B;SA7BYA,kBAAkB","names":["Component","combineLatest","of","Subject","FormControl","map","switchMap","tap","Exercise5Component","constructor","service","countries$","countryControl","valueChanges","getCountries","pipe","userInput","countries","filter","c","description","toLowerCase","indexOf","statesForCountry$","currentCountry$","asObservable","console","log","cntry","getStatesFor","id","states$","stateControl","states","updateStates","country","setValue","next","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/workspaces/ng-advanced-workshop/src/app/exercise5/exercise5.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport {combineLatest, Observable, of, Subject} from 'rxjs';\nimport {Country, State} from './types';\nimport {FormControl} from '@angular/forms';\nimport {CountryService} from './country.service';\nimport {map, switchMap, tap} from 'rxjs/operators';\n\n@Component({\n  selector: 'app-exercise5',\n  templateUrl: './exercise5.component.html',\n  styleUrls: ['./exercise5.component.css']\n})\nexport class Exercise5Component {\n\n  countries$: Observable<Country[]>;\n  currentCountry$ = new Subject<Country>();\n  states$: Observable<State[]>;\n  statesForCountry$: Observable<State[]> =  of([]);\n  state: State;\n  countryControl = new FormControl('');\n  stateControl = new FormControl('');\n\n  constructor(private service: CountryService) {\n    this.countries$ = combineLatest([this.countryControl.valueChanges, this.service.getCountries()]).pipe(\n      map(([userInput, countries]) => countries.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1))\n    );\n    this.statesForCountry$ = this.currentCountry$.asObservable().pipe(\n      tap(console.log),\n      switchMap(cntry => this.service.getStatesFor(cntry.id))\n    );\n    this.states$ = combineLatest([this.stateControl.valueChanges, this.statesForCountry$]).pipe(\n      map(([userInput, states]) => states.filter(c => c.description.toLowerCase().indexOf(userInput.toLowerCase()) !== -1))\n    );\n  }\n\n  updateStates(country: Country) {\n    this.countryControl.setValue(country.description);\n    this.stateControl.setValue('');\n    this.currentCountry$.next(country);\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}